import{a as bo,g as wo,u as Eo,_ as M,j as To,b as m,c as Q,s as so,e as Ro}from"./TransitionGroupContext-Mu39Ki5b.js";import{r as a}from"./iframe-DQOe9z8z.js";import{j}from"./jsx-runtime-B3uN8q26.js";import{G as So}from"./Grow-C48QWCZw.js";import{o as Z,a as oo,i as Oo}from"./Portal-YhJ6ZjP_.js";import{o as to,M as Co,P as zo}from"./Modal-BJ3N_k6Y.js";function _o(t,o=166){let r;function P(...y){const b=()=>{t.apply(this,y)};clearTimeout(r),r=setTimeout(b,o)}return P.clear=()=>{clearTimeout(r)},P}function Mo(t){return bo("MuiPopover",t)}wo("MuiPopover",["root","paper"]);const jo=["onEntering"],ko=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Lo=["slotProps"];function eo(t,o){let r=0;return typeof o=="number"?r=o:o==="center"?r=t.height/2:o==="bottom"&&(r=t.height),r}function ro(t,o){let r=0;return typeof o=="number"?r=o:o==="center"?r=t.width/2:o==="right"&&(r=t.width),r}function no(t){return[t.horizontal,t.vertical].map(o=>typeof o=="number"?`${o}px`:o).join(" ")}function k(t){return typeof t=="function"?t():t}const Wo=t=>{const{classes:o}=t;return Ro({root:["root"],paper:["paper"]},Mo,o)},Do=so(Co,{name:"MuiPopover",slot:"Root",overridesResolver:(t,o)=>o.root})({}),Ho=so(zo,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,o)=>o.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Io=a.forwardRef(function(o,r){var P,y,b;const w=Eo({props:o,name:"MuiPopover"}),{action:io,anchorEl:c,anchorOrigin:v={vertical:"top",horizontal:"left"},anchorPosition:L,anchorReference:g="anchorEl",children:lo,className:ao,container:co,elevation:W=8,marginThreshold:i=16,open:f,PaperProps:po={},slots:E,slotProps:T,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:R=So,transitionDuration:S="auto",TransitionProps:{onEntering:D}={},disableScrollLock:O=!1}=w,H=M(w.TransitionProps,jo),fo=M(w,ko),u=(P=T?.paper)!=null?P:po,C=a.useRef(),uo=To(C,u.ref),z=m({},w,{anchorOrigin:v,anchorReference:g,elevation:W,marginThreshold:i,externalPaperSlotProps:u,transformOrigin:x,TransitionComponent:R,transitionDuration:S,TransitionProps:H}),$=Wo(z),N=a.useCallback(()=>{if(g==="anchorPosition")return L;const e=k(c),s=(e&&e.nodeType===1?e:Z(C.current).body).getBoundingClientRect();return{top:s.top+eo(s,v.vertical),left:s.left+ro(s,v.horizontal)}},[c,v.horizontal,v.vertical,L,g]),A=a.useCallback(e=>({vertical:eo(e,x.vertical),horizontal:ro(e,x.horizontal)}),[x.horizontal,x.vertical]),U=a.useCallback(e=>{const n={width:e.offsetWidth,height:e.offsetHeight},s=A(n);if(g==="none")return{top:null,left:null,transformOrigin:no(s)};const V=N();let d=V.top-s.vertical,h=V.left-s.horizontal;const X=d+n.height,Y=h+n.width,q=to(k(c)),J=q.innerHeight-i,K=q.innerWidth-i;if(i!==null&&d<i){const l=d-i;d-=l,s.vertical+=l}else if(i!==null&&X>J){const l=X-J;d-=l,s.vertical+=l}if(i!==null&&h<i){const l=h-i;h-=l,s.horizontal+=l}else if(Y>K){const l=Y-K;h-=l,s.horizontal+=l}return{top:`${Math.round(d)}px`,left:`${Math.round(h)}px`,transformOrigin:no(s)}},[c,g,N,A,i]),[ho,F]=a.useState(f),p=a.useCallback(()=>{const e=C.current;if(!e)return;const n=U(e);n.top!==null&&(e.style.top=n.top),n.left!==null&&(e.style.left=n.left),e.style.transformOrigin=n.transformOrigin,F(!0)},[U]);a.useEffect(()=>(O&&window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)),[c,O,p]);const mo=(e,n)=>{D&&D(e,n),p()},Po=()=>{F(!1)};a.useEffect(()=>{f&&p()}),a.useImperativeHandle(io,()=>f?{updatePosition:()=>{p()}}:null,[f,p]),a.useEffect(()=>{if(!f)return;const e=_o(()=>{p()}),n=to(c);return n.addEventListener("resize",e),()=>{e.clear(),n.removeEventListener("resize",e)}},[c,f,p]);let G=S;S==="auto"&&!R.muiSupportAuto&&(G=void 0);const vo=co||(c?Z(k(c)).body:void 0),_=(y=E?.root)!=null?y:Do,I=(b=E?.paper)!=null?b:Ho,go=oo({elementType:I,externalSlotProps:m({},u,{style:ho?u.style:m({},u.style,{opacity:0})}),additionalProps:{elevation:W,ref:uo},ownerState:z,className:Q($.paper,u?.className)}),B=oo({elementType:_,externalSlotProps:T?.root||{},externalForwardedProps:fo,additionalProps:{ref:r,slotProps:{backdrop:{invisible:!0}},container:vo,open:f},ownerState:z,className:Q($.root,ao)}),{slotProps:xo}=B,yo=M(B,Lo);return j.jsx(_,m({},yo,!Oo(_)&&{slotProps:xo,disableScrollLock:O},{children:j.jsx(R,m({appear:!0,in:f,onEntering:mo,onExited:Po,timeout:G},H,{children:j.jsx(I,m({},go,{children:lo}))}))}))});export{Io as P};
